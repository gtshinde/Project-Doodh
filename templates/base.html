<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" type="image/x-icon" href="{{url_for('static', filename='images/milk_1.png')}}">
        <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/home_css.css')}}">
        <script src="{{ url_for('static', filename='js/script.js') }}"> </script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
         <meta name="google-signin-client_id"
          content="619500584057-gk7d4vh5v052kek376h4o64s7hbcafoe.apps.googleusercontent.com">
          <script src="https://apis.google.com/js/platform.js" async defer></script>
        {% block head %}
        {% endblock %}
    </head>
    <style>
          #usrname{
                display: block;
                height: 40px;
                color:white;
                font-size: 35px;
                position: absolute;
                top:10%;
                right:2%;
                }
    </style>
    <body>
        <span style="font-size:30px;cursor:pointer; color:white; " onclick="openNav()">&#9776;</span>
        <h1>Project Doodh</h1>
        {% if display_error_message|length %}
        <div  id="myModal" class="modal">
          <div class="modal-content">
          <span class="close">&times;</span> 
          <strong> {{ display_error_message }}</strong> 
          </div>
        </div>
        {% endif %}
        <div id="usrname"></div>
        <div id="emailID" style="display: none;"></div>
        <div style="display: none;" class="g-signin2" data-onsuccess="onSignIn"></div>
        <button style="float:right;" onclick="signOut();">Sign out</button>
        <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <a href="{{url_for('report')}}">Report</a>
            <a href="{{url_for('create_default')}}">Default Milk</a>
            <a href="{{url_for('create')}}">Change Milk Quantity</a>
            {% if is_admin == true %}
              <a href="{{url_for('items')}}">Items</a>
            {% endif %}            
        </div>
       
         {% block content %}
        {% endblock %}
        <script>
        function onSignIn(googleUser) {
          var profile = googleUser.getBasicProfile();
          console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
          console.log('Name: ' + profile.getName());
          console.log('Image URL: ' + profile.getImageUrl());
          console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.

          // location.replace("http://localhost:5000")
          document.querySelector('#usrname').innerText="Hello  "+googleUser.getBasicProfile().getGivenName()+" !";
          document.querySelector('#emailID').innerText=String(profile.getEmail());
        }

          function signOut() {
            var auth2 = gapi.auth2.getAuthInstance();
            auth2.signOut().then(function () {
              console.log('User signed out.');
            });
            location.replace("http://localhost:5000/signin")
          }

// Get the modal
var modal = document.getElementById("myModal");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}          
          // $.get( "signin.html", function( data ) {
          // $( '#admin').html( data );
          // alert( "Load was performed." );
          // });

    //     $(document).ready(function(){
    //     $(".g-signin2").click(function(){
    //         var rVal = $(".rbtn:checked").val();
    //         if(rVal){
    //             alert("Your are a - " + rVal);
    //         }
    //     });
         
    // });
        </script>

    </body>
    <!-- We can add the footer here too -->
</html>