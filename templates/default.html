{% extends "base.html" %}
{% block head %}
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
{% endblock %}
{% block content %}
<div  id="box" class="box">
  <strong>Kindly help us know your daily default milk requirement!</strong>
  </div>
{% if submitted=="Yes" %}
<div  id="myModal" class="modal">
  <div class="modal-content" style="height: fit-content; width:50%;">
    <span class="close">&times;</span> 
    <strong>Thank you, your request has been registered!</strong>
    <br>
    <br>
    <script>
      var cm = "{{ cm_item_qty }}"
      var bm = "{{ bm_item_qty }}"
      var dateValue = "{{ eff_date_from }}"
      document.write("Effective From: "+dateValue+" &nbsp;")
      document.write("Cow Milk: "+cm+" L &nbsp;") 
      document.write("Buffalow Milk: "+bm+" L &nbsp;")
    </script>
    <br>
    <br>
  </div>
</div>
{% endif %}			   

<form action="/default/{{user_id}}" method="POST">
  <table class="Tbl">
    <tr>
      <th class="alignh">Cow Milk</th>
      <th>
       <select id="cm" name="cm">
        <option value="0">0</option>
        <option value="0.5">1/2</option>
        <option value="1">1</option>
        <option value="1.5">1.5</option>
        <option value="2">2</option>
        <option value="2.5">2.5</option>
        <option value="3">3</option>
        <option value="0.0">No Change</option>
       </select>
      </th>
      </tr>
      <br>
      <tr>
      <th class="alignh">Buffalow Milk</th>
      <th>
       <select id="bm" name="bm">
        <option value="0">0</option>
        <option value="0.5">1/2</option>
        <option value="1">1</option>
        <option value="1.5">1.5</option>
        <option value="2">2</option>
        <option value="2.5">2.5</option>
        <option value="3">3</option>
        <option value="0.0">No Change</option>
       </select>
      </th>
      </tr>
      <tr>
        <th class="alignh">Effective From</th>
        <th>
          <input type="date" name="effectiveFrom" id="effectiveFrom">
          <!-- here have to put a calendar -->
        </th>
      </tr>
  </table>
  <br><br>
  <input type="submit" value="Submit">
</form>
<script>
// Get the modal
var modal = document.getElementById("myModal");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
// function getEmailID(){
//   console.log("The getEmailID function is able to use the below?")
//   console.log(googleUser.getBasicProfile().getGivenName());
//   // return googleUser.getBasicProfile().getGivenName();
// }
// function onsubmitfunc(){
//  var emailstr = document.getElementById("emailID").innerText;
//  var username = emailstr.trim();  
//  var effectiveDate = String(document.getElementById("effectiveFrom").value);
// // let emailID = $("#usrname").html();
// // let cmQty = $('#cm').html()
// // let bmQty = $('#bm').html()
// var defaultData = {emailID: username ,
//             cmQty: (document.getElementById("cm")).value,
//             bmQty: (document.getElementById("bm")).value,
//             effDateFrom: effectiveDate
//           }
// $.ajax({
//     type: 'POST',
//     url: '/default/{{user_id}}',
//     // data: JSON.stringify(emailID),
//     dataType: 'json',
//     data: JSON.stringify(defaultData),
//     contentType: "application/json; charset=utf-8",
//     success: function (data) {
//         console.log(data);
//     }
// })
// };
</script>
{% endblock %}